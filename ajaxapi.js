!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.ajaxapi=e()}}(function(){var e,t,n;return function r(e,t,n){function i(s,f){if(!t[s]){if(!e[s]){var u=typeof require=="function"&&require;if(!f&&u)return u(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=t[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return i(n?n:t)},c,c.exports,r,e,t,n)}return t[s].exports}var o=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,n){var r=e("uri-template-lite").URI;t.exports=function(e){return new i(e)};function i(e){if(typeof e==="string")e={base:e};else if(!e)e={};this.base=e.base;this._after=[];this._before=[];this.response=null}i.request=e("then-request");i.expand=r.expand;i.prototype.request=function(e,t,n){var r={headers:{},qs:{},json:n||{}};var o={method:e,url:this.prefix(t),data:n,headers:r.headers,options:r};this._before.forEach(function(e){e.call(this,o)});var s=i.request(o.method,o.url,o.options);s=s.then(this.saveResponse.bind(this)).then(this.parseBody.bind(this));this._after.forEach(function(e){s=s.then(e[0].bind(this),e[1].bind(this))});return s};i.prototype.get=o("GET");i.prototype.put=o("PUT");i.prototype.del=o("DELETE");i.prototype.post=o("POST");i.prototype.patch=o("PATCH");function o(e){return function(){return i.prototype.request.apply(this,[e].concat([].slice.call(arguments)))}}i.prototype.before=function(e){this._before.push(e);return this};i.prototype.after=function(e,t){this._after.push([e,t]);return this};i.prototype.parseBody=function(e){var t=e.getBody(),n=e.headers["content-type"];if(n.match(/^application\/json/))return JSON.parse(t);else return t};i.prototype.endpoint=function(e,t){var n=this;return function(r,o){var s=i.expand(t,r);return n.request(e,s,o)}};i.prototype.prefix=function(e){if(e[0]==="/")return(this.base||"")+e;else return e};i.prototype.saveResponse=function(e){this.response=this.res=e;return e}},{"then-request":3,"uri-template-lite":17}],2:[function(e,t,n){var r=t.exports={};var i=[];var o=false;function s(){if(o){return}o=true;var e;var t=i.length;while(t){e=i;i=[];var n=-1;while(++n<t){e[n]()}t=i.length}o=false}r.nextTick=function(e){i.push(e);if(!o){setTimeout(s,0)}};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";function f(){}r.on=f;r.addListener=f;r.once=f;r.off=f;r.removeListener=f;r.removeAllListeners=f;r.emit=f;r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},{}],3:[function(e,t,n){"use strict";var r=e("promise");var i=e("http-response-object");var o=e("./lib/handle-qs.js");t.exports=s;function s(e,t,n,s){var f=new r(function(r,f){var u=new window.XMLHttpRequest;if(typeof e!=="string"){throw new TypeError("The method must be a string.")}if(typeof t!=="string"){throw new TypeError("The URL/path must be a string.")}if(typeof n==="function"){s=n;n={}}if(n===null||n===undefined){n={}}if(typeof n!=="object"){throw new TypeError("Options must be an object (or null).")}if(typeof s!=="function"){s=undefined}e=e.toUpperCase();n.headers=n.headers||{};var a;var c=!!((a=/^([\w-]+:)?\/\/([^\/]+)/.exec(n.uri))&&a[2]!=window.location.host);if(!c)n.headers["X-Requested-With"]="XMLHttpRequest";if(n.qs){t=o(t,n.qs)}if(n.json){n.body=JSON.stringify(n.json);n.headers["content-type"]="application/json"}u.onreadystatechange=function(){if(u.readyState===4){var e={};u.getAllResponseHeaders().split("\r\n").forEach(function(t){var n=t.split(":");if(n.length>1){e[n[0].toLowerCase()]=n.slice(1).join(":").trim()}});r(new i(u.status,e,u.responseText))}};u.open(e,t,true);for(var p in n.headers){u.setRequestHeader(p.toLowerCase(),n.headers[p])}u.send(n.body?n.body:null)});f.getBody=function(){return f.then(function(e){return e.getBody()})};return f.nodeify(s)}},{"./lib/handle-qs.js":4,"http-response-object":5,promise:6}],4:[function(e,t,n){"use strict";var r=e("qs").parse;var i=e("qs").stringify;t.exports=o;function o(e,t){e=e.split("?");var n=e[0];var o=(e[1]||"").split("#")[0];var s=e[1]&&e[1].split("#").length>1?"#"+e[1].split("#")[1]:"";var f=r(o);for(var u in t){f[u]=t[u]}o=i(f);if(o!==""){o="?"+o}return n+o+s}},{qs:12}],5:[function(e,t,n){"use strict";t.exports=r;function r(e,t,n){if(typeof e!=="number"){throw new TypeError("statusCode must be a number but was "+typeof e)}if(t===null){throw new TypeError("headers cannot be null")}if(typeof t!=="object"){throw new TypeError("headers must be an object but was "+typeof t)}this.statusCode=e;this.headers={};for(var r in t){this.headers[r.toLowerCase()]=t[r]}this.body=n}r.prototype.getBody=function(e){if(this.statusCode>=300){var t=new Error("Server responded with status code "+this.statusCode+":\n"+this.body.toString());t.statusCode=this.statusCode;t.headers=this.headers;t.body=this.body;throw t}return e?this.body.toString(e):this.body}},{}],6:[function(e,t,n){"use strict";t.exports=e("./lib/core.js");e("./lib/done.js");e("./lib/es6-extensions.js");e("./lib/node-extensions.js")},{"./lib/core.js":7,"./lib/done.js":8,"./lib/es6-extensions.js":9,"./lib/node-extensions.js":10}],7:[function(e,t,n){"use strict";var r=e("asap");t.exports=i;function i(e){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");if(typeof e!=="function")throw new TypeError("not a function");var t=null;var n=null;var i=[];var f=this;this.then=function(e,t){return new f.constructor(function(n,r){u(new o(e,t,n,r))})};function u(e){if(t===null){i.push(e);return}r(function(){var r=t?e.onFulfilled:e.onRejected;if(r===null){(t?e.resolve:e.reject)(n);return}var i;try{i=r(n)}catch(o){e.reject(o);return}e.resolve(i)})}function a(e){try{if(e===f)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e==="object"||typeof e==="function")){var r=e.then;if(typeof r==="function"){s(r.bind(e),a,c);return}}t=true;n=e;p()}catch(i){c(i)}}function c(e){t=false;n=e;p()}function p(){for(var e=0,t=i.length;e<t;e++)u(i[e]);i=null}s(e,a,c)}function o(e,t,n,r){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.resolve=n;this.reject=r}function s(e,t,n){var r=false;try{e(function(e){if(r)return;r=true;t(e)},function(e){if(r)return;r=true;n(e)})}catch(i){if(r)return;r=true;n(i)}}},{asap:11}],8:[function(e,t,n){"use strict";var r=e("./core.js");var i=e("asap");t.exports=r;r.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){i(function(){throw e})})}},{"./core.js":7,asap:11}],9:[function(e,t,n){"use strict";var r=e("./core.js");var i=e("asap");t.exports=r;function o(e){this.then=function(t){if(typeof t!=="function")return this;return new r(function(n,r){i(function(){try{n(t(e))}catch(i){r(i)}})})}}o.prototype=r.prototype;var s=new o(true);var f=new o(false);var u=new o(null);var a=new o(undefined);var c=new o(0);var p=new o("");r.resolve=function(e){if(e instanceof r)return e;if(e===null)return u;if(e===undefined)return a;if(e===true)return s;if(e===false)return f;if(e===0)return c;if(e==="")return p;if(typeof e==="object"||typeof e==="function"){try{var t=e.then;if(typeof t==="function"){return new r(t.bind(e))}}catch(n){return new r(function(e,t){t(n)})}}return new o(e)};r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){if(t.length===0)return e([]);var r=t.length;function i(o,s){try{if(s&&(typeof s==="object"||typeof s==="function")){var f=s.then;if(typeof f==="function"){f.call(s,function(e){i(o,e)},n);return}}t[o]=s;if(--r===0){e(t)}}catch(u){n(u)}}for(var o=0;o<t.length;o++){i(o,t[o])}})};r.reject=function(e){return new r(function(t,n){n(e)})};r.race=function(e){return new r(function(t,n){e.forEach(function(e){r.resolve(e).then(t,n)})})};r.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":7,asap:11}],10:[function(e,t,n){"use strict";var r=e("./core.js");var i=e("asap");t.exports=r;r.denodeify=function(e,t){t=t||Infinity;return function(){var n=this;var i=Array.prototype.slice.call(arguments);return new r(function(r,o){while(i.length&&i.length>t){i.pop()}i.push(function(e,t){if(e)o(e);else r(t)});var s=e.apply(n,i);if(s&&(typeof s==="object"||typeof s==="function")&&typeof s.then==="function"){r(s)}})}};r.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments);var n=typeof t[t.length-1]==="function"?t.pop():null;var o=this;try{return e.apply(this,arguments).nodeify(n,o)}catch(s){if(n===null||typeof n=="undefined"){return new r(function(e,t){t(s)})}else{i(function(){n.call(o,s)})}}}};r.prototype.nodeify=function(e,t){if(typeof e!="function")return this;this.then(function(n){i(function(){e.call(t,null,n)})},function(n){i(function(){e.call(t,n)})})}},{"./core.js":7,asap:11}],11:[function(e,t,n){(function(e){var n={task:void 0,next:null};var r=n;var i=false;var o=void 0;var s=false;function f(){while(n.next){n=n.next;var e=n.task;n.task=void 0;var t=n.domain;if(t){n.domain=void 0;t.enter()}try{e()}catch(r){if(s){if(t){t.exit()}setTimeout(f,0);if(t){t.enter()}throw r}else{setTimeout(function(){throw r},0)}}if(t){t.exit()}}i=false}if(typeof e!=="undefined"&&e.nextTick){s=true;o=function(){e.nextTick(f)}}else if(typeof setImmediate==="function"){if(typeof window!=="undefined"){o=setImmediate.bind(window,f)}else{o=function(){setImmediate(f)}}}else if(typeof MessageChannel!=="undefined"){var u=new MessageChannel;u.port1.onmessage=f;o=function(){u.port2.postMessage(0)}}else{o=function(){setTimeout(f,0)}}function a(t){r=r.next={task:t,domain:s&&e.domain,next:null};if(!i){i=true;o()}}t.exports=a}).call(this,e("_process"))},{_process:2}],12:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":13}],13:[function(e,t,n){var r=e("./stringify");var i=e("./parse");var o={};t.exports={stringify:r,parse:i}},{"./parse":14,"./stringify":15}],14:[function(e,t,n){var r=e("./utils");var i={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};i.parseValues=function(e,t){var n={};var i=e.split(t.delimiter,t.parameterLimit===Infinity?undefined:t.parameterLimit);for(var o=0,s=i.length;o<s;++o){var f=i[o];var u=f.indexOf("]=")===-1?f.indexOf("="):f.indexOf("]=")+1;if(u===-1){n[r.decode(f)]=""}else{var a=r.decode(f.slice(0,u));var c=r.decode(f.slice(u+1));if(!n.hasOwnProperty(a)){n[a]=c}else{n[a]=[].concat(n[a]).concat(c)}}}return n};i.parseObject=function(e,t,n){if(!e.length){return t}var r=e.shift();var o={};if(r==="[]"){o=[];o=o.concat(i.parseObject(e,t,n))}else{var s=r[0]==="["&&r[r.length-1]==="]"?r.slice(1,r.length-1):r;var f=parseInt(s,10);var u=""+f;if(!isNaN(f)&&r!==s&&u===s&&f>=0&&f<=n.arrayLimit){o=[];o[f]=i.parseObject(e,t,n)}else{o[s]=i.parseObject(e,t,n)}}return o};i.parseKeys=function(e,t,n){if(!e){return}var r=/^([^\[\]]*)/;var o=/(\[[^\[\]]*\])/g;var s=r.exec(e);if(Object.prototype.hasOwnProperty(s[1])){return}var f=[];if(s[1]){f.push(s[1])}var u=0;while((s=o.exec(e))!==null&&u<n.depth){++u;if(!Object.prototype.hasOwnProperty(s[1].replace(/\[|\]/g,""))){f.push(s[1])}}if(s){f.push("["+e.slice(s.index)+"]")}return i.parseObject(f,t,n)};t.exports=function(e,t){if(e===""||e===null||typeof e==="undefined"){return{}}t=t||{};t.delimiter=typeof t.delimiter==="string"||r.isRegExp(t.delimiter)?t.delimiter:i.delimiter;t.depth=typeof t.depth==="number"?t.depth:i.depth;t.arrayLimit=typeof t.arrayLimit==="number"?t.arrayLimit:i.arrayLimit;t.parameterLimit=typeof t.parameterLimit==="number"?t.parameterLimit:i.parameterLimit;var n=typeof e==="string"?i.parseValues(e,t):e;var o={};var s=Object.keys(n);for(var f=0,u=s.length;f<u;++f){var a=s[f];var c=i.parseKeys(a,n[a],t);o=r.merge(o,c)}return r.compact(o)}},{"./utils":16}],15:[function(e,t,n){var r=e("./utils");var i={delimiter:"&",indices:true};i.stringify=function(e,t,n){if(r.isBuffer(e)){e=e.toString()}else if(e instanceof Date){e=e.toISOString()}else if(e===null){e=""}if(typeof e==="string"||typeof e==="number"||typeof e==="boolean"){return[encodeURIComponent(t)+"="+encodeURIComponent(e)]}var o=[];if(typeof e==="undefined"){return o}var s=Object.keys(e);for(var f=0,u=s.length;f<u;++f){var a=s[f];if(!n.indices&&Array.isArray(e)){o=o.concat(i.stringify(e[a],t,n))}else{o=o.concat(i.stringify(e[a],t+"["+a+"]",n))}}return o};t.exports=function(e,t){t=t||{};var n=typeof t.delimiter==="undefined"?i.delimiter:t.delimiter;t.indices=typeof t.indices==="boolean"?t.indices:i.indices;var r=[];if(typeof e!=="object"||e===null){return""}var o=Object.keys(e);for(var s=0,f=o.length;s<f;++s){var u=o[s];r=r.concat(i.stringify(e[u],u,t))}return r.join(n)}},{"./utils":16}],16:[function(e,t,n){var r={};n.arrayToObject=function(e){var t={};for(var n=0,r=e.length;n<r;++n){if(typeof e[n]!=="undefined"){t[n]=e[n]}}return t};n.merge=function(e,t){if(!t){return e}if(typeof t!=="object"){if(Array.isArray(e)){e.push(t)}else{e[t]=true}return e}if(typeof e!=="object"){e=[e].concat(t);return e}if(Array.isArray(e)&&!Array.isArray(t)){e=n.arrayToObject(e)}var r=Object.keys(t);for(var i=0,o=r.length;i<o;++i){var s=r[i];var f=t[s];if(!e[s]){e[s]=f}else{e[s]=n.merge(e[s],f)}}return e};n.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}};n.compact=function(e,t){if(typeof e!=="object"||e===null){return e}t=t||[];var r=t.indexOf(e);if(r!==-1){return t[r]}t.push(e);if(Array.isArray(e)){var i=[];for(var o=0,s=e.length;o<s;++o){if(typeof e[o]!=="undefined"){i.push(e[o])}}return i}var f=Object.keys(e);for(o=0,s=f.length;o<s;++o){var u=f[o];e[u]=n.compact(e[u],t)}return e};n.isRegExp=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"};n.isBuffer=function(e){if(e===null||typeof e==="undefined"){return false}return!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},{}],17:[function(e,t,n){!function(e){var t=/[\]\[:\/?#@!$&()*+,;=']/g,n={"":",","+":",","#":",","?":"&"},r=/[.*+?^=!:${}()|\[\]\/\\]/g,i=/\{([+#.\/;?&]?)((?:[\w%.]+(\*|:\d)?,?)+)\}/g,o=new RegExp(i.source+"|.[^{]*?","g");function s(e){return encodeURIComponent(e).replace(t,escape)}function f(e,t,n){return e+(t||n=="&"?"=":"")+t}function u(e){return typeof e=="string"}function a(e,t,n){e=e.map(t).filter(u);return e.length&&e.join(n)}function c(e,t){return e.replace(i,function(e,r,i){var o=n[r]||r,u=r&&o==","?encodeURI:s,c=(o==";"||o=="&")&&f,p=a(i.split(","),function(e){var n=e!=(e=e.split("*")[0]),r=!n&&(r=e.split(":"),e=r[0],r[1]),i=t[e];if(i==null)return;if(typeof i=="object"){if(Array.isArray(i)){i=a(i,u,n?c?o+e+"=":o:",")}else{i=a(Object.keys(i),function(e){return u(e)+(n?"=":",")+u(i[e])},n&&(c||o=="/")?o:",");if(n)c=null}if(!i)return}else{i=u(r?i.slice(0,r):i)}return c?c(e,i,o):i},o);return p||p===""?r!="+"?r+p:p:""})}e.expand=c;function p(e){var t=this;t.init(e);t.expand=c.bind(t,e)}function l(e){return e.replace(r,"\\$&")}p.prototype={init:function(e){var t=0,r="",i={},s="^"+e.replace(o,function(e,o,s){if(!s)return l(e);var f=n[o]||o,u=f==";"||f=="&";var a=s.split(",").map(function(e){var n="(.*?)",o=e!=(e=e.split("*")[0]),s=!o&&(s=e.split(":"),e=s[0],s[1]);t++;if(s){n="((?:%..|.){1,"+s+"})";i[e]={pos:t,len:s}}else if(s=i[e]){n="(\\"+s.pos+".*?)"}r+="t=($["+t+"]||'').split('"+f+"').map(decodeURIComponent);";r+='o["'+e+'"]=t.length>1?t:t[0];';return u?f=="&"?l(e+"=")+n:l(e)+"(?:="+n+")?":n}).join(l(f));return(o!="+"?l(o):"")+a})+"$";this.template=e;this.re=new RegExp(s);this.fn=new Function("$","var t,o={};"+r+"return o")},match:function(e){var t=this.re.exec(e);return t&&this.fn(t)}};e.Template=p}(this.URI||(this.URI={}))},{}]},{},[1])(1)});